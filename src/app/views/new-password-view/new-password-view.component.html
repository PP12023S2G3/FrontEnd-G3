<p-toast></p-toast>
<app-loader></app-loader>
<div class="body-new-password">
  <app-header></app-header>
  <div class="container-new-password">
    <h2 class="title-new-password">Recupera tu contraseña</h2>
    <h4 class="subtitle-new-password">Ingresa una nueva contraseña</h4>
    <form class="form-new-password">
      <div class="container-data-new-password" id="first-password">
        <label class="label-new-password">Contraseña</label>
        <span class="p-input-icon-left">
          <i class="pi pi-lock" style="font-size: 18px; color: #797979; z-index: 2;"></i>
          <p-password
            [(ngModel)]="password1"
            [toggleMask]="true"
            promptLabel=" "
            weakLabel="Baja"
            mediumLabel="Media"
            strongLabel="Fuerte"
            placeholder="Ingresar contraseña"
            pattern="^(?=.*[a-zñÑ])(?=.*[A-ZÑñ])(?=.*\d)[a-zA-Z0-9ñÑ]*$"             
            #passwordInput="ngModel"
            name="primera"
          >
            <ng-template pTemplate="header">
            </ng-template>
            <ng-template pTemplate="footer">
              <br>
              <p class="mt-2">La contraseña debe tener</p>
              <ul class="pl-2 ml-2 mt-0" style="line-height: 1.5">
                <li>Al menos una minúscula</li>
                <li>Al menos una mayúscula</li>
                <li>Al menos un número</li>
                <li>8 caracteres mínimo</li>
                <li>No debe contener caracteres especiales</li>
              </ul>
            </ng-template>
          </p-password>
        </span>
        <div *ngIf="passwordInput.errors && passwordInput.touched" class="errors" style="margin-top: 0.3rem;color: red;
          font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          text-align: left;
          display: contents;
          width: 300px;">
          <div>
            <span *ngIf="passwordInput.errors['required']">
              Indique una contraseña
            </span>
          </div>
          <div>
            <span *ngIf="passwordInput.errors['pattern']">
              Cumplir con los requisitos mencionados.
            </span>
          </div>
        </div>
      </div>
      <div class="container-data-new-password" id="second-password">
        <label class="label-new-password">Repetir contraseña</label>
        <span class="p-input-icon-left">
          <i class="pi pi-lock" style="font-size: 18px; color: #797979; z-index: 2;"></i>
          <p-password
            [(ngModel)]="password2"
            [toggleMask]="true"
            placeholder="Repetir contraseña"
            pattern="{{password1}}"
            name="second"
            [feedback]="false"
            #password2Input="ngModel"
            name="segunda"
          >
          </p-password>
        </span>
        <div *ngIf="password2Input.errors && password2Input.touched" class="errors" style="margin-top: 0.3rem;">
          <div>
            <span *ngIf="password2Input.errors['required']">
              Indique una contraseña
            </span>
          </div>
          <div>
            <span *ngIf="password2Input.errors['pattern']">
              Las contraseñas no coinciden.
            </span>
          </div>
        </div>
      </div>      
      <button class="gradient-button-new-password" (click)="onSubmit()"> Cambiar contraseña</button>
    </form>
  </div>
</div>
<p-dialog [draggable]="false" [blockScroll]="true" header="Header"
  [style]="{width: '600px', height: '200px', border: '1px solid #797979', margin: 'auto 20px'}" [closable]="false"
  [(visible)]="modalVisible">
  <ng-template pTemplate="header">
    <span class="text-xl font-bold modal-title-new-password">Recuperación de la cuenta</span>
  </ng-template>
  <p class="modal-content-new-password">
    La contraseña se actualizó correctamente
  </p>
  <ng-template pTemplate="footer">
    <a routerLink="/login" class="modal-inicio-new-password" href="">Iniciar sesión</a>
  </ng-template>
</p-dialog>
